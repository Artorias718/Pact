/*
Copyright 2015-Present Entando Inc. (http://www.entando.com) All rights reserved.
This library is free software; you can redistribute it and/or modify it under
the terms of the GNU Lesser General Public License as published by the Free
Software Foundation; either version 2.1 of the License, or (at your option)
any later version.
This library is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
details.
 */
package org.entando.selenium.contracttests;

import au.com.dius.pact.consumer.ConsumerPactBuilder;
import au.com.dius.pact.consumer.Pact;
import au.com.dius.pact.consumer.PactVerificationResult;
import au.com.dius.pact.consumer.dsl.PactDslRequestWithPath;
import au.com.dius.pact.consumer.dsl.PactDslResponse;
import au.com.dius.pact.consumer.dsl.PactDslWithProvider;
import au.com.dius.pact.consumer.junit5.PactConsumerTestExt;
import au.com.dius.pact.consumer.junit5.PactTestFor;
import au.com.dius.pact.model.MockProviderConfig;
import au.com.dius.pact.model.RequestResponsePact;
import org.entando.selenium.pages.*;
import org.entando.selenium.utils.UsersTestBase;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.springframework.beans.factory.annotation.Autowired;


import static au.com.dius.pact.consumer.ConsumerPactRunnerKt.runConsumerTest;
import static org.entando.selenium.contracttests.PactUtil.*;
import static java.lang.Thread.sleep;

@ExtendWith(PactConsumerTestExt.class)
@PactTestFor(providerName = "FragmentsAddProvider", port = "8080")
public class FragmentsAddConsumerTest extends UsersTestBase {

    @Autowired
    public DTDashboardPage dTDashboardPage;

    @Autowired
    public DTFragmentPage dTFragmentPage;

    @Autowired
    public DTFragmentNewPage dTFragmentNewPage;

    @BeforeAll
    public void setupSessionAndNavigateToUserManagement (){
        PactDslWithProvider builder = ConsumerPactBuilder.consumer("LoginConsumer").hasPactWith("LoginProvider");
        PactDslResponse accessTokenResponse = buildGetAccessToken(builder);
        PactDslResponse getUsersResponse = PactUtil.buildGetUsers(accessTokenResponse,1,1);
        getUsersResponse = PactUtil.buildGetUsers(getUsersResponse,1,10);
        PactDslResponse getPagesResponse = buildGetPages(getUsersResponse);
        PactDslResponse getPageStatusResponse = buildGetPageStatus(getPagesResponse);
        PactDslResponse getWidgetsDashResponse = PactUtil.buildGetWidgets(getPageStatusResponse);
        PactDslResponse getGroupsResponse = buildGetGroups(getWidgetsDashResponse);
        PactDslResponse getPageModelsResponse = buildGetPageModels(getGroupsResponse);
        PactDslResponse getLanguagesResponse = buildGetLanguages(getPageModelsResponse);
        PactDslResponse getProfileTypesResponse = buildGetProfileTypes(getLanguagesResponse);

        PactDslResponse getWidgetsResponse = buildGetWidgets(getProfileTypesResponse,1,0);
        PactDslResponse getFragmentsResponse = PactUtil.buildGetFragments(getWidgetsResponse,1,10);

        MockProviderConfig config = MockProviderConfig.httpConfig("localhost", 8080);
        PactVerificationResult result = runConsumerTest(getFragmentsResponse.toPact(), config, mockServer -> {
            login();
            dTDashboardPage.SelectSecondOrderLinkWithSleep("UX Patterns", "Fragments");
        });
    }

    @Pact(provider = "FragmentsAddProvider", consumer = "FragmentsAddConsumer")
    public RequestResponsePact createPact(PactDslWithProvider builder) {
        PactDslResponse postFragmentsResponse = buildPostFragments(builder);
        PactDslResponse getOnlyWidgetsResponse = buildOnlyGetWidgets(postFragmentsResponse,1,0);
        PactDslResponse getFragmentsResponse = buildGetFragments(getOnlyWidgetsResponse,1,10);
        return getFragmentsResponse.toPact();
    }

    private PactDslResponse buildPostFragments(PactDslWithProvider builder) {
        PactDslRequestWithPath optionsRequest = builder
                .uponReceiving("The Fragment Add OPTIONS Interaction")
                .path("/entando/api/fragments")
                .method("OPTIONS")
                .headers("Access-control-request-method", "POST")
                .body("");
        PactDslResponse optionsResponse = optionsResponse(optionsRequest);
        PactDslRequestWithPath request = optionsResponse
                .uponReceiving("The Fragment Add POST Interaction")
                .path("/entando/api/fragments")
                .method("POST");
        return standardResponse(request, "{}");
    }

    public static PactDslResponse buildGetWidgets(PactDslResponse builder, int page, int pageSize) {
        PactDslRequestWithPath optionsRequest = builder.uponReceiving("The Widgets OPTIONS Interaction")
                .path("/entando/api/widgets")
                .method("OPTIONS")
                .headers("Access-control-request-method", "GET")
                .matchQuery("page", "\\d+", "" + page)
                .matchQuery("pageSize",  "\\d+", "" + pageSize);
        PactDslResponse optionsResponse = optionsResponse(optionsRequest);
        PactDslRequestWithPath request = optionsResponse.
                uponReceiving("The Widgets GET Interaction")
                .path("/entando/api/widgets")
                .method("GET")
                .matchQuery("page", "\\d+", "" + page)
                .matchQuery("pageSize",  "\\d+", ""+pageSize);
        return standardResponse(request, "{\"payload\":[{\"code\":\"pct\",\"used\":0,\"titles\":{\"en\":\"pct\",\"it\":\"pct\"},\"typology\":\"user\",\"group\":\"gruppo_prova\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},\n{\"code\":\"ANN_Archive\",\"used\":0,\"titles\":{\"en\":\"Announcements - Archive\",\"it\":\"Bandi - Archivio\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"ANN_Latest\",\"used\":0,\"titles\":{\"en\":\"Announcements - Latest Announcements\",\"it\":\"Bandi - Ultimi Bandi\"},\"typology\":\"user\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"NWS_Archive\",\"used\":0,\"titles\":{\"en\":\"News - Archive\",\"it\":\"Notizie - Archivio\"},\"typology\":\"user\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"NWS_Latest\",\"used\":0,\"titles\":{\"en\":\"News - Latest News\",\"it\":\"Notizie - Ultime Notizie\"},\"typology\":\"user\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"PleaseDoNotUse\",\"used\":0,\"titles\":{\"en\":\"My Widget changed again\",\"it\":\"Mio Widget modificato ancora\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"RSL_Archive\",\"used\":0,\"titles\":{\"en\":\"Resolutions - Archive\",\"it\":\"Delibere - Archivio\"},\"typology\":\"user\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"RSL_Latest\",\"used\":0,\"titles\":{\"en\":\"Resolutions - Latest Resolutions\",\"it\":\"Delibere - Ultime Delibere\"},\"typology\":\"user\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"blog_postlist\",\"used\":0,\"titles\":{\"en\":\"Blog - Post List\",\"it\":\"Blog - Lista Post\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"bpm-case-actions\",\"used\":0,\"titles\":{\"en\":\"PAM-Case actions\",\"it\":\"Azioni caso PAM\"},\"typology\":\"jpkiebpm\",\"group\":\"free\",\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-chart\",\"used\":0,\"titles\":{\"en\":\"PAM-Case chart\",\"it\":\"PAM-Case chart\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-comments\",\"used\":0,\"titles\":{\"en\":\"PAM-Case comments\",\"it\":\"Commenti del caso PAM\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-details\",\"used\":0,\"titles\":{\"en\":\"PAM-Case details\",\"it\":\"Dettagli caso PAM\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-file\",\"used\":0,\"titles\":{\"en\":\"PAM-Case file\",\"it\":\"File caso PAM\"},\"typology\":\"jpkiebpm\",\"group\":\"free\",\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-instance-selector\",\"used\":0,\"titles\":{\"en\":\"PAM-Case instance selector\",\"it\":\"Selettore di istanza Case PAM\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-progress-status\",\"used\":0,\"titles\":{\"en\":\"PAM-Case progress status\",\"it\":\"PAM-Case stato del processo\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-roles\",\"used\":0,\"titles\":{\"en\":\"PAM-Case roles\",\"it\":\"Ruoli caso PAM\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-datatable-process-list\",\"used\":0,\"titles\":{\"en\":\"PAM-Process list\",\"it\":\"PAM-Lista processi\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-datatable-task-list\",\"used\":0,\"titles\":{\"en\":\"PAM-Datatable Task List\",\"it\":\"PAM-Datatable Task List\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-datatype-form\",\"used\":0,\"titles\":{\"en\":\"PAM-Form by DataType\",\"it\":\"PAM-Form by DataType\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-process-diagram\",\"used\":0,\"titles\":{\"en\":\"PAM-Process diagram\",\"it\":\"Diagramma di processo PAM\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"content_feedback_viewer\",\"used\":0,\"titles\":{\"en\":\"Content Feedback - Publish Content\",\"it\":\"Feedback Contenuti - Pubblica un Contenuto\"},\"typology\":\"jpcontentfeedback\",\"group\":null,\"pluginCode\":\"jpcontentfeedback\",\"pluginDesc\":\"Content Feedback\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"content_viewer\",\"used\":6,\"titles\":{\"en\":\"Contents - Publish a Content\",\"it\":\"Contenuti - Pubblica un Contenuto\"},\"typology\":\"jacms\",\"group\":\"free\",\"pluginCode\":\"jacms\",\"pluginDesc\":\"Entando CMS\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"content_viewer_list\",\"used\":0,\"titles\":{\"en\":\"Contents - Publish a List of Contents\",\"it\":\"Contenuti - Pubblica una Lista di Contenuti\"},\"typology\":\"jacms\",\"group\":null,\"pluginCode\":\"jacms\",\"pluginDesc\":\"Entando CMS\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"entando-widget-language_choose_inspinia\",\"used\":6,\"titles\":{\"en\":\"Choose a Language (INSPINIA)\",\"it\":\"Choose a Language (INSPINIA)\"},\"typology\":\"custom\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"entando-widget-login_form_inspinia\",\"used\":6,\"titles\":{\"en\":\"Dropdown Sign In (INSPINIA)\",\"it\":\"Dropdown Sign In (INSPINIA)\"},\"typology\":\"custom\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"entando-widget-navigation_bar_inspinia\",\"used\":6,\"titles\":{\"en\":\"Navigation - Bar (INSPINIA)\",\"it\":\"Navigazione - Barra Orizzontale (INSPINIA)\"},\"typology\":\"custom\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"entando_apis\",\"used\":0,\"titles\":{\"en\":\"APIs\",\"it\":\"APIs\"},\"typology\":\"stock\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"formAction\",\"used\":0,\"titles\":{\"en\":\"Internal Servlet\",\"it\":\"Invocazione di una Servlet Interna\"},\"typology\":\"stock\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpavatar_avatar\",\"used\":0,\"titles\":{\"en\":\"Avatar - Show the current user avatar\",\"it\":\"Avatar - Mostra l'avatar dell'utente corrente\"},\"typology\":\"jpavatar\",\"group\":null,\"pluginCode\":\"jpavatar\",\"pluginDesc\":\"My Avatar\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpblog_archive\",\"used\":0,\"titles\":{\"en\":\"Blog - Blog Archive\",\"it\":\"Blog- Archivio Blog\"},\"typology\":\"jpblog\",\"group\":\"free\",\"pluginCode\":\"jpblog\",\"pluginDesc\":\"Blog\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpblog_categories\",\"used\":0,\"titles\":{\"en\":\"Blog - Categories Summary\",\"it\":\"Blog - Riepilogo Categorie\"},\"typology\":\"jpblog\",\"group\":null,\"pluginCode\":\"jpblog\",\"pluginDesc\":\"Blog\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpblog_post_list\",\"used\":0,\"titles\":{\"en\":\"Blog - Post List\",\"it\":\"Blog - Lista Post\"},\"typology\":\"jpblog\",\"group\":null,\"pluginCode\":\"jpblog\",\"pluginDesc\":\"Blog\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpcasclient_login\",\"used\":0,\"titles\":{\"en\":\"Login - with CAS\",\"it\":\"Login - con CAS\"},\"typology\":\"jpcasclient\",\"group\":null,\"pluginCode\":\"jpcasclient\",\"pluginDesc\":\"CAS Client\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcmstagcloud\",\"used\":0,\"titles\":{\"en\":\"Tag Cloud\",\"it\":\"Tag Cloud\"},\"typology\":\"jpcmstagcloud\",\"group\":null,\"pluginCode\":\"jpcmstagcloud\",\"pluginDesc\":\"Tag Cloud\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcmstagcloud_viewer_list\",\"used\":0,\"titles\":{\"en\":\"Publish a List of Tagged Contents\",\"it\":\"Pubblica Lista Contenuti Taggati\"},\"typology\":\"jpcmstagcloud\",\"group\":null,\"pluginCode\":\"jpcmstagcloud\",\"pluginDesc\":\"Tag Cloud\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_entryIdea\",\"used\":0,\"titles\":{\"en\":\"Collaboration - New Idea\",\"it\":\"Collaboration - Nuova Idea\"},\"typology\":\"jpcollaboration\",\"group\":null,\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_fastEntryIdea\",\"used\":0,\"titles\":{\"en\":\"Collaboration - Quick Entry Idea\",\"it\":\"Collaboration - Inserimento Rapido Idea\"},\"typology\":\"jpcollaboration\",\"group\":null,\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_idea\",\"used\":0,\"titles\":{\"en\":\"Collaboration - Ideas\",\"it\":\"Collaboration - Dettagli Idea\"},\"typology\":\"jpcollaboration\",\"group\":null,\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_ideaInstance\",\"used\":0,\"titles\":{\"en\":\"Collaboration - Publish idea\",\"it\":\"Collaboration - Pubblica istanza\"},\"typology\":\"jpcollaboration\",\"group\":null,\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpcollaboration_idea_find\",\"used\":0,\"titles\":{\"en\":\"Collaboration - Search Ideas\",\"it\":\"Collaboration - Ricerca Idea\"},\"typology\":\"jpcollaboration\",\"group\":null,\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_idea_tags\",\"used\":2,\"titles\":{\"en\":\"Collaboration - Categories\",\"it\":\"Collaboration - Categorie\"},\"typology\":\"jpcollaboration\",\"group\":\"free\",\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_search_result\",\"used\":0,\"titles\":{\"en\":\"Collaboration - Search Result\",\"it\":\"Collaboration - Risultati della ricerca\"},\"typology\":\"jpcollaboration\",\"group\":\"administrators\",\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_statistics\",\"used\":0,\"titles\":{\"en\":\"Collaboration - Statistics\",\"it\":\"Collaboration - Statistiche\"},\"typology\":\"jpcollaboration\",\"group\":null,\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpgeoref_GoogleListViewer\",\"used\":0,\"titles\":{\"en\":\"Publish contents on Map\",\"it\":\"Pubblicazione contenuti su Mappa\"},\"typology\":\"jpgeoref\",\"group\":null,\"pluginCode\":\"jpgeoref\",\"pluginDesc\":\"GeoReferenced contents\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpgeoref_GoogleRoute\",\"used\":0,\"titles\":{\"en\":\"Route\",\"it\":\"Tragitto su Mappa\"},\"typology\":\"jpgeoref\",\"group\":null,\"pluginCode\":\"jpgeoref\",\"pluginDesc\":\"GeoReferenced contents\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpnewsletter_registration\",\"used\":0,\"titles\":{\"en\":\"Newsletter subscription\",\"it\":\"Iscrizione Newsletter\"},\"typology\":\"jpnewsletter\",\"group\":null,\"pluginCode\":\"jpnewsletter\",\"pluginDesc\":\"Newsletter\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpnewsletter_subscription\",\"used\":0,\"titles\":{\"en\":\"Newsletter subscription confirm\",\"it\":\"Conferma Iscrizione Newsletter\"},\"typology\":\"jpnewsletter\",\"group\":null,\"pluginCode\":\"jpnewsletter\",\"pluginDesc\":\"Newsletter\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpnewsletter_unsubscription\",\"used\":0,\"titles\":{\"en\":\"Newsletter unsubscription\",\"it\":\"Cancellazione Iscrizione Newsletter\"},\"typology\":\"jpnewsletter\",\"group\":null,\"pluginCode\":\"jpnewsletter\",\"pluginDesc\":\"Newsletter\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jprss_rssChannels\",\"used\":0,\"titles\":{\"en\":\"RSS Channels\",\"it\":\"Canali RSS\"},\"typology\":\"jprss\",\"group\":null,\"pluginCode\":\"jprss\",\"pluginDesc\":\"RSS\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpseo_content_viewer\",\"used\":0,\"titles\":{\"en\":\"Contents - Publish a Content with extra meta-description\",\"it\":\"Contenuti - Pubblica un Contenuto con extra meta-description\"},\"typology\":\"jpseo\",\"group\":null,\"pluginCode\":\"jpseo\",\"pluginDesc\":\"SEO\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpsurvey_detailsSurvey\",\"used\":0,\"titles\":{\"en\":\"Questionnaire/Survey - Details\",\"it\":\"Questionari/Sondaggi - Dettaglio\"},\"typology\":\"jpsurvey\",\"group\":null,\"pluginCode\":\"jpsurvey\",\"pluginDesc\":\"Survey - Questionnaire\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpsurvey_pollArchive\",\"used\":0,\"titles\":{\"en\":\"Surveys - Surveys Archive\",\"it\":\"Sondaggi - Archivio dei Sondaggi\"},\"typology\":\"jpsurvey\",\"group\":null,\"pluginCode\":\"jpsurvey\",\"pluginDesc\":\"Survey - Questionnaire\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpsurvey_pollList\",\"used\":0,\"titles\":{\"en\":\"Surveys - Active List\",\"it\":\"Sondaggi - Lista Sondaggi Attivi\"},\"typology\":\"jpsurvey\",\"group\":null,\"pluginCode\":\"jpsurvey\",\"pluginDesc\":\"Survey - Questionnaire\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpsurvey_questionnaireArchive\",\"used\":0,\"titles\":{\"en\":\"Questionnaires - Questionnaires Archive\",\"it\":\"Questionari - Archivio dei Questionari\"},\"typology\":\"jpsurvey\",\"group\":null,\"pluginCode\":\"jpsurvey\",\"pluginDesc\":\"Survey - Questionnaire\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpsurvey_questionnaireList\",\"used\":0,\"titles\":{\"en\":\"Questionnaires - Active List\",\"it\":\"Questionari - Lista Questionari Attivi\"},\"typology\":\"jpsurvey\",\"group\":null,\"pluginCode\":\"jpsurvey\",\"pluginDesc\":\"Survey - Questionnaire\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpsurvey_resultsSurvey\",\"used\":0,\"titles\":{\"en\":\"Questionnaire/Survey - Show Results\",\"it\":\"Questionario/Sondaggio - Mostra Risultati\"},\"typology\":\"jpsurvey\",\"group\":null,\"pluginCode\":\"jpsurvey\",\"pluginDesc\":\"Survey - Questionnaire\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jptokenapi_myToken\",\"used\":0,\"titles\":{\"en\":\"My API Token\",\"it\":\"My API Token\"},\"typology\":\"jptokenapi\",\"group\":null,\"pluginCode\":\"jptokenapi\",\"pluginDesc\":\"Token API\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpuserreg_Activation\",\"used\":0,\"titles\":{\"en\":\"User Activation\",\"it\":\"Attivazione Utente\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpuserreg_Reactivation\",\"used\":0,\"titles\":{\"en\":\"User Reactivation\",\"it\":\"Riattivazione Utente\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpuserreg_Recover\",\"used\":0,\"titles\":{\"en\":\"User Recover\",\"it\":\"Recupero Utenza\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpuserreg_Registration\",\"used\":0,\"titles\":{\"en\":\"User Registration\",\"it\":\"Registrazione Utente\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpuserreg_Suspension\",\"used\":0,\"titles\":{\"en\":\"User Suspension\",\"it\":\"Sospensione Utente\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpuserreg_loginUserReg\",\"used\":0,\"titles\":{\"en\":\"Login Form - With registration management\",\"it\":\"Form di login - Con gestione registrazione\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpuserreg_profile_choice\",\"used\":0,\"titles\":{\"en\":\"User Registration - with profile choice\",\"it\":\"Registrazione Utente - con scelta del profilo\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpwebdynamicform_message_choice\",\"used\":0,\"titles\":{\"en\":\"Dynamic Web Forms - Choice of a type of Message\",\"it\":\"Dynamic Web Forms - Scelta tipo di Messaggio\"},\"typology\":\"jpwebdynamicform\",\"group\":null,\"pluginCode\":\"jpwebdynamicform\",\"pluginDesc\":\"Web Dynamic Forms\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpwebdynamicform_message_form\",\"used\":0,\"titles\":{\"en\":\"Dynamic Web Forms - Publish the form for a Message Type\",\"it\":\"Dynamic Web Forms - Pubblica il form di un tipo di Messaggio\"},\"typology\":\"jpwebdynamicform\",\"group\":null,\"pluginCode\":\"jpwebdynamicform\",\"pluginDesc\":\"Web Dynamic Forms\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpwidgetutils_iframe\",\"used\":0,\"titles\":{\"en\":\"IFrame\",\"it\":\"IFrame\"},\"typology\":\"jpwidgetutils\",\"group\":null,\"pluginCode\":\"jpwidgetutils\",\"pluginDesc\":\"Widget Utils\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpwidgetutils_replicator\",\"used\":0,\"titles\":{\"en\":\"Widget Replicator\",\"it\":\"Replicatore di Widget\"},\"typology\":\"jpwidgetutils\",\"group\":null,\"pluginCode\":\"jpwidgetutils\",\"pluginDesc\":\"Widget Utils\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"login_form\",\"used\":0,\"titles\":{\"en\":\"Login Form\",\"it\":\"Form di Login\"},\"typology\":\"stock\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"messages_system\",\"used\":0,\"titles\":{\"en\":\"System Messages\",\"it\":\"Messaggi di Sistema\"},\"typology\":\"stock\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"row_content_viewer_list\",\"used\":0,\"titles\":{\"en\":\"Contents - Publish Contents\",\"it\":\"Contenuti - Pubblica Contenuti\"},\"typology\":\"jacms\",\"group\":\"free\",\"pluginCode\":\"jacms\",\"pluginDesc\":\"Entando CMS\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"search_result\",\"used\":0,\"titles\":{\"en\":\"Search - Search Result\",\"it\":\"Ricerca - Risultati della Ricerca\"},\"typology\":\"jacms\",\"group\":null,\"pluginCode\":\"jacms\",\"pluginDesc\":\"Entando CMS\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"seleniumtest_donttouch\",\"used\":0,\"titles\":{\"en\":\"SeleniumTest_DontTouch\",\"it\":\"SeleniumTest_DontTouch\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"testw\",\"used\":0,\"titles\":{\"en\":\"TestWidget\",\"it\":\"TestWidget\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"testw_se\",\"used\":0,\"titles\":{\"en\":\"TestWidget_se\",\"it\":\"TestWidget_se\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"testwidget2\",\"used\":0,\"titles\":{\"en\":\"TestWidget2\",\"it\":\"TestWidget2\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"userprofile_editCurrentUser\",\"used\":0,\"titles\":{\"en\":\"Edit Current User\",\"it\":\"Edita Utente Corrente\"},\"typology\":\"custom\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"userprofile_editCurrentUser_password\",\"used\":0,\"titles\":{\"en\":\"Edit Current User Password\",\"it\":\"Edita Password Utente Corrente\"},\"typology\":\"custom\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"userprofile_editCurrentUser_profile\",\"used\":0,\"titles\":{\"en\":\"Edit Current User Profile\",\"it\":\"Edita Profilo Utente Corrente\"},\"typology\":\"custom\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false}],\"errors\":[],\"metaData\":{\"page\":1,\"pageSize\":100,\"lastPage\":1,\"totalItems\":79,\"sort\":\"code\",\"direction\":\"ASC\",\"filters\":[],\"additionalParams\":{}}}");
    }

    public static PactDslResponse buildOnlyGetWidgets(PactDslResponse builder, int page, int pageSize) {
        PactDslRequestWithPath request = builder.
                uponReceiving("The Widgets GET Interaction")
                .path("/entando/api/widgets")
                .method("GET")
                .matchQuery("page", "\\d+", "" + page)
                .matchQuery("pageSize",  "\\d+", ""+pageSize);
        return standardResponse(request, "{\"payload\":[{\"code\":\"pct\",\"used\":0,\"titles\":{\"en\":\"pct\",\"it\":\"pct\"},\"typology\":\"user\",\"group\":\"gruppo_prova\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},\n{\"code\":\"ANN_Archive\",\"used\":0,\"titles\":{\"en\":\"Announcements - Archive\",\"it\":\"Bandi - Archivio\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"ANN_Latest\",\"used\":0,\"titles\":{\"en\":\"Announcements - Latest Announcements\",\"it\":\"Bandi - Ultimi Bandi\"},\"typology\":\"user\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"NWS_Archive\",\"used\":0,\"titles\":{\"en\":\"News - Archive\",\"it\":\"Notizie - Archivio\"},\"typology\":\"user\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"NWS_Latest\",\"used\":0,\"titles\":{\"en\":\"News - Latest News\",\"it\":\"Notizie - Ultime Notizie\"},\"typology\":\"user\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"PleaseDoNotUse\",\"used\":0,\"titles\":{\"en\":\"My Widget changed again\",\"it\":\"Mio Widget modificato ancora\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"RSL_Archive\",\"used\":0,\"titles\":{\"en\":\"Resolutions - Archive\",\"it\":\"Delibere - Archivio\"},\"typology\":\"user\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"RSL_Latest\",\"used\":0,\"titles\":{\"en\":\"Resolutions - Latest Resolutions\",\"it\":\"Delibere - Ultime Delibere\"},\"typology\":\"user\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"blog_postlist\",\"used\":0,\"titles\":{\"en\":\"Blog - Post List\",\"it\":\"Blog - Lista Post\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"bpm-case-actions\",\"used\":0,\"titles\":{\"en\":\"PAM-Case actions\",\"it\":\"Azioni caso PAM\"},\"typology\":\"jpkiebpm\",\"group\":\"free\",\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-chart\",\"used\":0,\"titles\":{\"en\":\"PAM-Case chart\",\"it\":\"PAM-Case chart\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-comments\",\"used\":0,\"titles\":{\"en\":\"PAM-Case comments\",\"it\":\"Commenti del caso PAM\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-details\",\"used\":0,\"titles\":{\"en\":\"PAM-Case details\",\"it\":\"Dettagli caso PAM\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-file\",\"used\":0,\"titles\":{\"en\":\"PAM-Case file\",\"it\":\"File caso PAM\"},\"typology\":\"jpkiebpm\",\"group\":\"free\",\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-instance-selector\",\"used\":0,\"titles\":{\"en\":\"PAM-Case instance selector\",\"it\":\"Selettore di istanza Case PAM\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-progress-status\",\"used\":0,\"titles\":{\"en\":\"PAM-Case progress status\",\"it\":\"PAM-Case stato del processo\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-case-roles\",\"used\":0,\"titles\":{\"en\":\"PAM-Case roles\",\"it\":\"Ruoli caso PAM\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-datatable-process-list\",\"used\":0,\"titles\":{\"en\":\"PAM-Process list\",\"it\":\"PAM-Lista processi\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-datatable-task-list\",\"used\":0,\"titles\":{\"en\":\"PAM-Datatable Task List\",\"it\":\"PAM-Datatable Task List\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-datatype-form\",\"used\":0,\"titles\":{\"en\":\"PAM-Form by DataType\",\"it\":\"PAM-Form by DataType\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"bpm-process-diagram\",\"used\":0,\"titles\":{\"en\":\"PAM-Process diagram\",\"it\":\"Diagramma di processo PAM\"},\"typology\":\"jpkiebpm\",\"group\":null,\"pluginCode\":\"jpkiebpm\",\"pluginDesc\":\"Entando Red Hat PAM Connector\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"content_feedback_viewer\",\"used\":0,\"titles\":{\"en\":\"Content Feedback - Publish Content\",\"it\":\"Feedback Contenuti - Pubblica un Contenuto\"},\"typology\":\"jpcontentfeedback\",\"group\":null,\"pluginCode\":\"jpcontentfeedback\",\"pluginDesc\":\"Content Feedback\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"content_viewer\",\"used\":6,\"titles\":{\"en\":\"Contents - Publish a Content\",\"it\":\"Contenuti - Pubblica un Contenuto\"},\"typology\":\"jacms\",\"group\":\"free\",\"pluginCode\":\"jacms\",\"pluginDesc\":\"Entando CMS\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"content_viewer_list\",\"used\":0,\"titles\":{\"en\":\"Contents - Publish a List of Contents\",\"it\":\"Contenuti - Pubblica una Lista di Contenuti\"},\"typology\":\"jacms\",\"group\":null,\"pluginCode\":\"jacms\",\"pluginDesc\":\"Entando CMS\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"entando-widget-language_choose_inspinia\",\"used\":6,\"titles\":{\"en\":\"Choose a Language (INSPINIA)\",\"it\":\"Choose a Language (INSPINIA)\"},\"typology\":\"custom\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"entando-widget-login_form_inspinia\",\"used\":6,\"titles\":{\"en\":\"Dropdown Sign In (INSPINIA)\",\"it\":\"Dropdown Sign In (INSPINIA)\"},\"typology\":\"custom\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"entando-widget-navigation_bar_inspinia\",\"used\":6,\"titles\":{\"en\":\"Navigation - Bar (INSPINIA)\",\"it\":\"Navigazione - Barra Orizzontale (INSPINIA)\"},\"typology\":\"custom\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"entando_apis\",\"used\":0,\"titles\":{\"en\":\"APIs\",\"it\":\"APIs\"},\"typology\":\"stock\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"formAction\",\"used\":0,\"titles\":{\"en\":\"Internal Servlet\",\"it\":\"Invocazione di una Servlet Interna\"},\"typology\":\"stock\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpavatar_avatar\",\"used\":0,\"titles\":{\"en\":\"Avatar - Show the current user avatar\",\"it\":\"Avatar - Mostra l'avatar dell'utente corrente\"},\"typology\":\"jpavatar\",\"group\":null,\"pluginCode\":\"jpavatar\",\"pluginDesc\":\"My Avatar\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpblog_archive\",\"used\":0,\"titles\":{\"en\":\"Blog - Blog Archive\",\"it\":\"Blog- Archivio Blog\"},\"typology\":\"jpblog\",\"group\":\"free\",\"pluginCode\":\"jpblog\",\"pluginDesc\":\"Blog\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpblog_categories\",\"used\":0,\"titles\":{\"en\":\"Blog - Categories Summary\",\"it\":\"Blog - Riepilogo Categorie\"},\"typology\":\"jpblog\",\"group\":null,\"pluginCode\":\"jpblog\",\"pluginDesc\":\"Blog\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpblog_post_list\",\"used\":0,\"titles\":{\"en\":\"Blog - Post List\",\"it\":\"Blog - Lista Post\"},\"typology\":\"jpblog\",\"group\":null,\"pluginCode\":\"jpblog\",\"pluginDesc\":\"Blog\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpcasclient_login\",\"used\":0,\"titles\":{\"en\":\"Login - with CAS\",\"it\":\"Login - con CAS\"},\"typology\":\"jpcasclient\",\"group\":null,\"pluginCode\":\"jpcasclient\",\"pluginDesc\":\"CAS Client\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcmstagcloud\",\"used\":0,\"titles\":{\"en\":\"Tag Cloud\",\"it\":\"Tag Cloud\"},\"typology\":\"jpcmstagcloud\",\"group\":null,\"pluginCode\":\"jpcmstagcloud\",\"pluginDesc\":\"Tag Cloud\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcmstagcloud_viewer_list\",\"used\":0,\"titles\":{\"en\":\"Publish a List of Tagged Contents\",\"it\":\"Pubblica Lista Contenuti Taggati\"},\"typology\":\"jpcmstagcloud\",\"group\":null,\"pluginCode\":\"jpcmstagcloud\",\"pluginDesc\":\"Tag Cloud\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_entryIdea\",\"used\":0,\"titles\":{\"en\":\"Collaboration - New Idea\",\"it\":\"Collaboration - Nuova Idea\"},\"typology\":\"jpcollaboration\",\"group\":null,\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_fastEntryIdea\",\"used\":0,\"titles\":{\"en\":\"Collaboration - Quick Entry Idea\",\"it\":\"Collaboration - Inserimento Rapido Idea\"},\"typology\":\"jpcollaboration\",\"group\":null,\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_idea\",\"used\":0,\"titles\":{\"en\":\"Collaboration - Ideas\",\"it\":\"Collaboration - Dettagli Idea\"},\"typology\":\"jpcollaboration\",\"group\":null,\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_ideaInstance\",\"used\":0,\"titles\":{\"en\":\"Collaboration - Publish idea\",\"it\":\"Collaboration - Pubblica istanza\"},\"typology\":\"jpcollaboration\",\"group\":null,\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpcollaboration_idea_find\",\"used\":0,\"titles\":{\"en\":\"Collaboration - Search Ideas\",\"it\":\"Collaboration - Ricerca Idea\"},\"typology\":\"jpcollaboration\",\"group\":null,\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_idea_tags\",\"used\":2,\"titles\":{\"en\":\"Collaboration - Categories\",\"it\":\"Collaboration - Categorie\"},\"typology\":\"jpcollaboration\",\"group\":\"free\",\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_search_result\",\"used\":0,\"titles\":{\"en\":\"Collaboration - Search Result\",\"it\":\"Collaboration - Risultati della ricerca\"},\"typology\":\"jpcollaboration\",\"group\":\"administrators\",\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpcollaboration_statistics\",\"used\":0,\"titles\":{\"en\":\"Collaboration - Statistics\",\"it\":\"Collaboration - Statistiche\"},\"typology\":\"jpcollaboration\",\"group\":null,\"pluginCode\":\"jpcollaboration\",\"pluginDesc\":\"Collaboration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpgeoref_GoogleListViewer\",\"used\":0,\"titles\":{\"en\":\"Publish contents on Map\",\"it\":\"Pubblicazione contenuti su Mappa\"},\"typology\":\"jpgeoref\",\"group\":null,\"pluginCode\":\"jpgeoref\",\"pluginDesc\":\"GeoReferenced contents\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpgeoref_GoogleRoute\",\"used\":0,\"titles\":{\"en\":\"Route\",\"it\":\"Tragitto su Mappa\"},\"typology\":\"jpgeoref\",\"group\":null,\"pluginCode\":\"jpgeoref\",\"pluginDesc\":\"GeoReferenced contents\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpnewsletter_registration\",\"used\":0,\"titles\":{\"en\":\"Newsletter subscription\",\"it\":\"Iscrizione Newsletter\"},\"typology\":\"jpnewsletter\",\"group\":null,\"pluginCode\":\"jpnewsletter\",\"pluginDesc\":\"Newsletter\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpnewsletter_subscription\",\"used\":0,\"titles\":{\"en\":\"Newsletter subscription confirm\",\"it\":\"Conferma Iscrizione Newsletter\"},\"typology\":\"jpnewsletter\",\"group\":null,\"pluginCode\":\"jpnewsletter\",\"pluginDesc\":\"Newsletter\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpnewsletter_unsubscription\",\"used\":0,\"titles\":{\"en\":\"Newsletter unsubscription\",\"it\":\"Cancellazione Iscrizione Newsletter\"},\"typology\":\"jpnewsletter\",\"group\":null,\"pluginCode\":\"jpnewsletter\",\"pluginDesc\":\"Newsletter\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jprss_rssChannels\",\"used\":0,\"titles\":{\"en\":\"RSS Channels\",\"it\":\"Canali RSS\"},\"typology\":\"jprss\",\"group\":null,\"pluginCode\":\"jprss\",\"pluginDesc\":\"RSS\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpseo_content_viewer\",\"used\":0,\"titles\":{\"en\":\"Contents - Publish a Content with extra meta-description\",\"it\":\"Contenuti - Pubblica un Contenuto con extra meta-description\"},\"typology\":\"jpseo\",\"group\":null,\"pluginCode\":\"jpseo\",\"pluginDesc\":\"SEO\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpsurvey_detailsSurvey\",\"used\":0,\"titles\":{\"en\":\"Questionnaire/Survey - Details\",\"it\":\"Questionari/Sondaggi - Dettaglio\"},\"typology\":\"jpsurvey\",\"group\":null,\"pluginCode\":\"jpsurvey\",\"pluginDesc\":\"Survey - Questionnaire\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpsurvey_pollArchive\",\"used\":0,\"titles\":{\"en\":\"Surveys - Surveys Archive\",\"it\":\"Sondaggi - Archivio dei Sondaggi\"},\"typology\":\"jpsurvey\",\"group\":null,\"pluginCode\":\"jpsurvey\",\"pluginDesc\":\"Survey - Questionnaire\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpsurvey_pollList\",\"used\":0,\"titles\":{\"en\":\"Surveys - Active List\",\"it\":\"Sondaggi - Lista Sondaggi Attivi\"},\"typology\":\"jpsurvey\",\"group\":null,\"pluginCode\":\"jpsurvey\",\"pluginDesc\":\"Survey - Questionnaire\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpsurvey_questionnaireArchive\",\"used\":0,\"titles\":{\"en\":\"Questionnaires - Questionnaires Archive\",\"it\":\"Questionari - Archivio dei Questionari\"},\"typology\":\"jpsurvey\",\"group\":null,\"pluginCode\":\"jpsurvey\",\"pluginDesc\":\"Survey - Questionnaire\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpsurvey_questionnaireList\",\"used\":0,\"titles\":{\"en\":\"Questionnaires - Active List\",\"it\":\"Questionari - Lista Questionari Attivi\"},\"typology\":\"jpsurvey\",\"group\":null,\"pluginCode\":\"jpsurvey\",\"pluginDesc\":\"Survey - Questionnaire\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpsurvey_resultsSurvey\",\"used\":0,\"titles\":{\"en\":\"Questionnaire/Survey - Show Results\",\"it\":\"Questionario/Sondaggio - Mostra Risultati\"},\"typology\":\"jpsurvey\",\"group\":null,\"pluginCode\":\"jpsurvey\",\"pluginDesc\":\"Survey - Questionnaire\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jptokenapi_myToken\",\"used\":0,\"titles\":{\"en\":\"My API Token\",\"it\":\"My API Token\"},\"typology\":\"jptokenapi\",\"group\":null,\"pluginCode\":\"jptokenapi\",\"pluginDesc\":\"Token API\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpuserreg_Activation\",\"used\":0,\"titles\":{\"en\":\"User Activation\",\"it\":\"Attivazione Utente\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpuserreg_Reactivation\",\"used\":0,\"titles\":{\"en\":\"User Reactivation\",\"it\":\"Riattivazione Utente\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpuserreg_Recover\",\"used\":0,\"titles\":{\"en\":\"User Recover\",\"it\":\"Recupero Utenza\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpuserreg_Registration\",\"used\":0,\"titles\":{\"en\":\"User Registration\",\"it\":\"Registrazione Utente\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpuserreg_Suspension\",\"used\":0,\"titles\":{\"en\":\"User Suspension\",\"it\":\"Sospensione Utente\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpuserreg_loginUserReg\",\"used\":0,\"titles\":{\"en\":\"Login Form - With registration management\",\"it\":\"Form di login - Con gestione registrazione\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpuserreg_profile_choice\",\"used\":0,\"titles\":{\"en\":\"User Registration - with profile choice\",\"it\":\"Registrazione Utente - con scelta del profilo\"},\"typology\":\"jpuserreg\",\"group\":null,\"pluginCode\":\"jpuserreg\",\"pluginDesc\":\"User Registration\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpwebdynamicform_message_choice\",\"used\":0,\"titles\":{\"en\":\"Dynamic Web Forms - Choice of a type of Message\",\"it\":\"Dynamic Web Forms - Scelta tipo di Messaggio\"},\"typology\":\"jpwebdynamicform\",\"group\":null,\"pluginCode\":\"jpwebdynamicform\",\"pluginDesc\":\"Web Dynamic Forms\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"jpwebdynamicform_message_form\",\"used\":0,\"titles\":{\"en\":\"Dynamic Web Forms - Publish the form for a Message Type\",\"it\":\"Dynamic Web Forms - Pubblica il form di un tipo di Messaggio\"},\"typology\":\"jpwebdynamicform\",\"group\":null,\"pluginCode\":\"jpwebdynamicform\",\"pluginDesc\":\"Web Dynamic Forms\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpwidgetutils_iframe\",\"used\":0,\"titles\":{\"en\":\"IFrame\",\"it\":\"IFrame\"},\"typology\":\"jpwidgetutils\",\"group\":null,\"pluginCode\":\"jpwidgetutils\",\"pluginDesc\":\"Widget Utils\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"jpwidgetutils_replicator\",\"used\":0,\"titles\":{\"en\":\"Widget Replicator\",\"it\":\"Replicatore di Widget\"},\"typology\":\"jpwidgetutils\",\"group\":null,\"pluginCode\":\"jpwidgetutils\",\"pluginDesc\":\"Widget Utils\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"login_form\",\"used\":0,\"titles\":{\"en\":\"Login Form\",\"it\":\"Form di Login\"},\"typology\":\"stock\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"messages_system\",\"used\":0,\"titles\":{\"en\":\"System Messages\",\"it\":\"Messaggi di Sistema\"},\"typology\":\"stock\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"row_content_viewer_list\",\"used\":0,\"titles\":{\"en\":\"Contents - Publish Contents\",\"it\":\"Contenuti - Pubblica Contenuti\"},\"typology\":\"jacms\",\"group\":\"free\",\"pluginCode\":\"jacms\",\"pluginDesc\":\"Entando CMS\",\"guiFragments\":[],\"hasConfig\":true},{\"code\":\"search_result\",\"used\":0,\"titles\":{\"en\":\"Search - Search Result\",\"it\":\"Ricerca - Risultati della Ricerca\"},\"typology\":\"jacms\",\"group\":null,\"pluginCode\":\"jacms\",\"pluginDesc\":\"Entando CMS\",\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"seleniumtest_donttouch\",\"used\":0,\"titles\":{\"en\":\"SeleniumTest_DontTouch\",\"it\":\"SeleniumTest_DontTouch\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"testw\",\"used\":0,\"titles\":{\"en\":\"TestWidget\",\"it\":\"TestWidget\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"testw_se\",\"used\":0,\"titles\":{\"en\":\"TestWidget_se\",\"it\":\"TestWidget_se\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"testwidget2\",\"used\":0,\"titles\":{\"en\":\"TestWidget2\",\"it\":\"TestWidget2\"},\"typology\":\"user\",\"group\":\"free\",\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"userprofile_editCurrentUser\",\"used\":0,\"titles\":{\"en\":\"Edit Current User\",\"it\":\"Edita Utente Corrente\"},\"typology\":\"custom\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"userprofile_editCurrentUser_password\",\"used\":0,\"titles\":{\"en\":\"Edit Current User Password\",\"it\":\"Edita Password Utente Corrente\"},\"typology\":\"custom\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false},{\"code\":\"userprofile_editCurrentUser_profile\",\"used\":0,\"titles\":{\"en\":\"Edit Current User Profile\",\"it\":\"Edita Profilo Utente Corrente\"},\"typology\":\"custom\",\"group\":null,\"pluginCode\":null,\"pluginDesc\":null,\"guiFragments\":[],\"hasConfig\":false}],\"errors\":[],\"metaData\":{\"page\":1,\"pageSize\":100,\"lastPage\":1,\"totalItems\":79,\"sort\":\"code\",\"direction\":\"ASC\",\"filters\":[],\"additionalParams\":{}}}");
    }

    public static PactDslResponse buildGetFragments(PactDslResponse builder, int page, int pageSize) {
        PactDslRequestWithPath request = builder.
                uponReceiving("The Fragment GET Interaction")
                .path("/entando/api/fragments")
                .method("GET")
                .matchQuery("page", "\\d+", "" + page)
                .matchQuery("pageSize",  "\\d+", ""+pageSize);
        return standardResponse(request, "{\"payload\":[{\"code\":\"AAA\",\"locked\":false,\"widgetType\":{\"code\":null,\"title\":null},\"pluginCode\":null},{\"code\":\"ANN_Archive\",\"locked\":false,\"widgetType\":{\"code\":\"ANN_Archive\",\"title\":null},\"pluginCode\":null},{\"code\":\"bpm-case-actions\",\"locked\":false,\"widgetType\":{\"code\":\"bpm-case-actions\",\"title\":null},\"pluginCode\":\"jpkiebpm\"},{\"code\":\"bpm-case-file\",\"locked\":false,\"widgetType\":{\"code\":\"bpm-case-file\",\"title\":null},\"pluginCode\":\"jpkiebpm\"},{\"code\":\"collaboration_entryIdea\",\"locked\":true,\"widgetType\":{\"code\":\"jpcollaboration_entryIdea\",\"title\":null},\"pluginCode\":\"jpcollaboration\"},{\"code\":\"collaboration_fastEntryIdea\",\"locked\":true,\"widgetType\":{\"code\":\"jpcollaboration_fastEntryIdea\",\"title\":null},\"pluginCode\":\"jpcollaboration\"},{\"code\":\"collaboration_idea_find\",\"locked\":true,\"widgetType\":{\"code\":\"jpcollaboration_idea_find\",\"title\":null},\"pluginCode\":\"jpcollaboration\"},{\"code\":\"collaboration_idea_tags\",\"locked\":true,\"widgetType\":{\"code\":\"jpcollaboration_idea_tags\",\"title\":null},\"pluginCode\":\"jpcollaboration\"},{\"code\":\"collaboration_statistics\",\"locked\":true,\"widgetType\":{\"code\":\"jpcollaboration_statistics\",\"title\":null},\"pluginCode\":\"jpcollaboration\"},{\"code\":\"collaboration_viewIdea\",\"locked\":true,\"widgetType\":{\"code\":null,\"title\":null},\"pluginCode\":\"jpcollaboration\"}],\"errors\":[],\"metaData\":{\"page\":1,\"pageSize\":10,\"lastPage\":12,\"totalItems\":116,\"sort\":\"code\",\"direction\":\"ASC\",\"filters\":[],\"additionalParams\":{}}}");
    }

    @Test
    public void runTest() throws InterruptedException {

        dTFragmentPage.getNewButton().click();
        dTFragmentNewPage.setCode("PCT");
        dTFragmentNewPage.setGUICode("pact");
        dTFragmentNewPage.save();
    }
}
